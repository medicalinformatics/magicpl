<?xml version="1.0" encoding="UTF-8"?>
<paths xmlns="http://www.example.org/Pfade" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.example.org/Pfade paths.xsd ">

	<!-- /paths/getId
      * Schritte 1,8 in DSK
      * Zuständige Komponentente: Lokale PSD
      * Pfad-Typ: Selector
      * Input: IDAT, DKTK eigewilligt (DKTK_Type: true/false) (1 in DSK)
      * Output: ID (DKTK_ID/Lokal_ID)
    -->
	<path>
		<name>getId</name>
		<parameters></parameters>
		<input>IDAT</input>
		<output>ID</output>
		<switch evaluator="evaluatorClass">
			<case value="true">
				<!--
				  * Schritte 2a,4,5,7 in DSK
				   * Pfad-Typ: Multipfad
				   * Teilpfade: /paths/getKN
				   *            /paths/getTkt
				   *            /paths/generateId
				   * Input: IDAT (2a)
				   * Output: DKTK_ID (7)
				-->
				<multipath>
					<name>getDKTKId</name>
					<parameters></parameters>
                    <input>IDAT</input>
                    <output>DKTK_ID</output>
					<step>
						<!-- /paths/getKN
						 * Schritt 2a,4 in DSK
						 * Input: IDAT
						 * Output: KNTKT
						-->
						<name>getKNTKT</name>
						<implementation>de.mainzelliste.paths.processor.CngClient</implementation>
					</step>
					<step>
						<!-- /paths/generateId
						 * Schritte 5,7 in DSK
						 * Zuständige Komponente: Mainzelliste (RL)
						 * Input: KNTKT
						 * Output: DKTK_ID
						-->
						<name>getDKTKId</name>
						<parameters></parameters>
                        <input>KNTKT</input>
                        <output>DKTK_ID</output>
						<implementation>de.mainzelliste.paths.processor.MainzellisteClient</implementation>
					</step>
				</multipath>
			</case>
			<default>
				<!--
				  * Schritte 2b-7 in DSK
				  * Zuständige Komponente: Lokales Identitätsmanagement
				   * Pfad-Typ: Multipfad
				   * Teilpfade: /paths/getKN
				   *            /paths/generateId
				   * Input: IDAT (2b)
				   * Output: Lokal_ID (7)
				-->
				<multipath>
					<name>getLocalId</name>
					<parameters></parameters>
					<path>
                        <!-- /paths/getKN
                         * Schritt 2b in DSK
                         * Zuständige Komponente: Lokale PSD
                         * Input: IDAT
                         * Output: KN
                        -->
						<name>getKN</name>
						<parameters>lokal</parameters>
						<implementation>de.mainzelliste.paths.processor.CngClient</implementation>
					</path>
					<path>
                        <!-- /paths/generateId
                         * Schritte 5-7 in DSK
                         * Zuständige Komponente: Mainzelliste (RL)
                         * Input: KN
                         * Output: Lokal_ID
                        -->
						<name>generateId</name>
						<parameters></parameters>
						<implementation>de.mainzelliste.paths.processor.MainzellisteClient</implementation>
					</path>
				</multipath>
			</default>
		</switch>
	</path>

	<path>
		<!-- /paths/getExportIds
          * (IDManager: Ressource for requesting encrypted export Ids)
          * Input: lokale ID
          * Output: Export ID
        -->
        <name>getExportIds</name>
        <parameters></parameters>
        <implementation>de.mainzelliste.paths.processor.CngClient</implementation>
	</path>

</paths>
